var noResult={l:"查无结果"},watermark,loading={l:"加载索引中..."},catModules="模块",catPackages="程序包",catTypes="类型",catMembers="成员",catSearchTags="Search Tags",highlight='<span class="result-highlight">$&</span>',searchPattern="",fallbackPattern="",RANKING_THRESHOLD=2,NO_MATCH=65535,MIN_RESULTS=3,MAX_RESULTS=500,UNNAMED="<Unnamed>";function escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getHighlightedText(e,t,n){var s=escapeHtml(e),o=s.replace(t,highlight);return o===s&&(o=s.replace(n,highlight)),o}function getURLPrefix(e){var n="",t="/";return e.item.category===catModules?e.item.l+t:e.item.category===catPackages&&e.item.m?e.item.m+t:((e.item.category===catTypes||e.item.category===catMembers)&&(e.item.m?n=e.item.m+t:$.each(packageSearchIndex,function(s,o){o.m&&e.item.p===o.l&&(n=o.m+t)})),n)}function createSearchPattern(e){var t="",n=!1;return e.replace(/,\s*/g,", ").trim().split(/\s+/).forEach(function(e,s){s>0&&(t+=n&&/^\w/.test(e)?"\\s+":"\\s*");for(var o,a=e.split(/(?=[A-Z,.()<>[/])/),i=0;i<a.length;i++){if(o=a[i],o==="")continue;t+=$.ui.autocomplete.escapeRegex(o),n=/\w$/.test(o),n&&(t+="([a-z0-9_$<>\\[\\]]*?)")}}),t}function createMatcher(e,t){var n=/[A-Z]/.test(e);return new RegExp(e,t+(n?"":"i"))}watermark="Search",$(function(){var e=$("#search-input"),t=$("#reset-button");e.val(""),e.prop("disabled",!1),t.prop("disabled",!1),e.val(watermark).addClass("watermark"),e.blur(function(){$(this).val().length===0&&$(this).val(watermark).addClass("watermark")}),e.on("click keydown paste",function(){$(this).val()===watermark&&$(this).val("").removeClass("watermark")}),t.click(function(){e.val("").focus()}),e.focus()[0].setSelectionRange(0,0)}),$.widget("custom.catcomplete",$.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},_renderMenu:function(e,t){var n=this,s="";n.menu.bindings=$(),$.each(t,function(t,o){var i;o.category&&o.category!==s&&(e.append('<li class="ui-autocomplete-category">'+o.category+"</li>"),s=o.category),i=n._renderItemData(e,o),o.category?(i.attr("aria-label",o.category+" : "+o.l),i.attr("class","result-item")):(i.attr("aria-label",o.l),i.attr("class","result-item"))})},_renderItem:function(e,t){var i,a,n="",s=createMatcher(escapeHtml(searchPattern),"g"),o=new RegExp(fallbackPattern,"gi");return t.category===catModules?n=getHighlightedText(t.l,s,o):t.category===catPackages?n=getHighlightedText(t.l,s,o):t.category===catTypes?n=t.p&&t.p!==UNNAMED?getHighlightedText(t.p+"."+t.l,s,o):getHighlightedText(t.l,s,o):t.category===catMembers?n=t.p&&t.p!==UNNAMED?getHighlightedText(t.p+"."+t.c+"."+t.l,s,o):getHighlightedText(t.c+"."+t.l,s,o):t.category===catSearchTags?n=getHighlightedText(t.l,s,o):n=t.l,a=$("<li/>").appendTo(e),i=$("<div/>").appendTo(a),t.category===catSearchTags&&t.h?t.d?i.html(n+'<span class="search-tag-holder-result"> ('+t.h+')</span><br><span class="search-tag-desc-result">'+t.d+"</span><br>"):i.html(n+'<span class="search-tag-holder-result"> ('+t.h+")</span>"):t.m?i.html(t.m+"/"+n):i.html(n),a}});function rankMatch(e,t){if(!e)return NO_MATCH;var o,i,a,l,d,u,s=e.index,n=e.input,r=2,c=0;s===0||/\W/.test(n[s-1])||"_"===n[s]?r=0:("_"===n[s-1]||n[s]===n[s].toUpperCase()&&!/^[A-Z0-9_$]+$/.test(n))&&(r=1),l=s+e[0].length,o=n.indexOf("("),d=o>-1?o:n.length,t!==catModules&&t!==catSearchTags&&(u=t===catPackages?"/":".",o>-1&&o<s?c+=2:n.lastIndexOf(u,d)>=l&&(c+=2)),i=e[0].length===d?0:1;for(a=1;a<e.length;a++)e[a]&&(i+=e[a].length);return t===catTypes&&(/[A-Z]/.test(n.substring(l))&&(i+=5),/[A-Z]/.test(n.substring(0,s))&&(i+=5)),r+c+i/200}function doSearch(e,t){var o,i,n=[];if(searchPattern=createSearchPattern(e.term),fallbackPattern=createSearchPattern(e.term.toLowerCase()),searchPattern==="")return this.close();o=createMatcher(searchPattern,""),i=new RegExp(fallbackPattern,"i");function a(e,t,n,s){if(e){var o=[];return $.each(e,function(e,i){i.category=n;var a=rankMatch(t.exec(s(i)),n);return a<RANKING_THRESHOLD&&o.push({ranking:a,item:i}),o.length<=MAX_RESULTS}),o.sort(function(e,t){return e.ranking-t.ranking}).map(function(e){return e.item})}return[]}function s(e,t,s){var c,r=a(e,o,t,s);n=n.concat(r),r.length<=MIN_RESULTS&&!o.ignoreCase&&(c=a(e,i,t,s),n=n.concat(c.filter(function(e){return r.indexOf(e)===-1})))}s(moduleSearchIndex,catModules,function(e){return e.l}),s(packageSearchIndex,catPackages,function(t){return t.m&&e.term.indexOf("/")>-1?t.m+"/"+t.l:t.l}),s(typeSearchIndex,catTypes,function(t){return e.term.indexOf(".")>-1?t.p+"."+t.l:t.l}),s(memberSearchIndex,catMembers,function(t){return e.term.indexOf(".")>-1?t.p+"."+t.c+"."+t.l:t.l}),s(tagSearchIndex,catSearchTags,function(e){return e.l}),indexFilesLoaded()?updateSearchResults=function(){}:(updateSearchResults=function(){doSearch(e,t)},n.unshift(loading)),t(n)}$(function(){$("#search-input").catcomplete({minLength:1,delay:300,source:doSearch,response:function(e,t){t.content.length?$("#search-input").empty():t.content.push(noResult)},autoFocus:!0,focus:function(){return!1},position:{collision:"flip"},select:function(e,t){if(t.item.category){var n=getURLPrefix(t);t.item.category===catModules?n+="module-summary.html":t.item.category===catPackages?t.item.u?n=t.item.u:n+=t.item.l.replace(/\./g,"/")+"/package-summary.html":t.item.category===catTypes?t.item.u?n=t.item.u:t.item.p===UNNAMED?n+=t.item.l+".html":n+=t.item.p.replace(/\./g,"/")+"/"+t.item.l+".html":t.item.category===catMembers?(t.item.p===UNNAMED?n+=t.item.c+".html#":n+=t.item.p.replace(/\./g,"/")+"/"+t.item.c+".html#",t.item.u?n+=t.item.u:n+=t.item.l):t.item.category===catSearchTags&&(n+=t.item.u),top!==window?parent.classFrame.location=pathtoroot+n:window.location.href=pathtoroot+n,$("#search-input").focus()}}})})